<!DOCTYPE HTML>
<html>
	<head>
		<title>Bddify Test Result @DateTime.Now.ToShortDateString()</title>
		
		<style type="text/css">
		<style type="text/css"> 
			body
			{
				min-width:900px;
				max-width:100%;
				background-color:#fff;
				font-family: Segoe UI, Verdana, Arial, Helvetica, sans-serif;
				font-size: 10pt;
				margin: 0;
				padding: 0;
				background-repeat: repeat-x;
		    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAGNCAIAAACnknc+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAILSURBVGhD7ZZJbgMxDAT5/886jmfRruhoIFH1gTCQA4O6tdlsUhoh9nVkwB5nBuxxZMB85qra1VuZq7nL49hiX2cGllwAtTVlzgeqqkU012DPMwP2PAuwZKwWg8nenmjiQOVgPPdVnnvk1q783KOqv68CmJAh9pJMyMpc3RZc6kcH85n/4+rXXQD7vgug5NdVgFVdARPRhPnrroAddwVWb6xW0ZzVeCQyOVarwVJ57VFrEdF88pkqYEI+UgWc1T5z32Cyup1pi525AmotZ26AXbkBUk712qOSy971ylsMGi9pJedqJYu1oPmdG2BKLu3eI6s/2pujpdwAg6mWZKk0YFV3QJmLatHbK/dUtliqDVBrEdFy6cAy90QT5rk2wHLtgJaFuU8W0dC81A6YkH1r8fVW1W2UPVZaB9wy9+ad19aBFQ3NaxuACXMps3kfdY/ujeatd8BpDrGXtMw9c7c+ABO9xdzC3FuNyXsfgMloHzTvfQIr2gRk8jHbHhNrUfIYfY+BtqQPy3zeItrAPxtjAkruYwKG3kOZ+6LJuekH3mhzjj3LnHuLapYn/hkFG3OdGCYX5uK86aatj0j2ph+YmhsHV9UyGnVX5jJ5mP/eQCz1z1sRa4m1vG0grkNch7gOMz6D+AziM4jP4O9/pON1iNchXod4HeJ1eN9AvIrxKsarGK9ivIr/5VX8Ac/k0qafpzWgAAAAAElFTkSuQmCC);
			}
			
			#main
			{
				width: 100%;
			}
			
			#header
			{
				vertical-align:middle;
				padding:10px;
				background-repeat: repeat-x;
				background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAABOCAIAAACfcrDqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADPSURBVEhLzda7jcQwEARRSglfMmtvCpvFeRcTb5TBK4PAEjQHrflUD3X9vH+XndvCnqh774W3qK618R5LQHswCegpHcCmTtiocrM4cgbLsvcpVUXrWK46hNIBbutOuKgLR5UnW7yls1otgUNlnXEsqypXzdxFNTDAwKZFpOv1eWH0JLS9LP38/ga03TAJF7V3W8WuqpHpNWQTPKp6BkJNtjVLgW2qnKvWX/8JdQjlMUq5qr0LA4xA4jWVpRiWslRzNqGOdXAJZXno9fr8YfQ/c6c/iQFM16IAAAAASUVORK5CYII=);
        border-bottom: 2px solid #fff;
        height: 57px;
			}
			
			#bddifyTitle
			{
			  	font-size: 20pt;
			  	font-family: Trebuchet MS;
			  	font-weight:bold;
				  color: white;
				  text-shadow: #262f57 1px 1px 3px;
			}
			
			#bddifyDescription
			{
			  font-size:large;
				color:#fff;
				color: #fff;
				text-shadow: #262f57 1px 1px 3px;
			}
			
			#summaryDiv
			{
			  margin:5px;
			  padding:5px;
			}
			
			#resultSummary
			{
			}
			
			#coverageSummary
			{
				margin-left:50px;
			}
 
			#testResult
			{
			  margin:5px;
			  padding:5px;
			}
			#testResult p 
			{
			    font-weight: bold;
			    color: #2B547D;
			    font-size: 14pt;
			}
			
			#testResult>table
			{
		        background-color:White;
		        color:Black;
			}
			
			table
			{
				  width:100%;
				  padding:5px;
				  border-collapse: collapse;
			}
			
			tbody
			{
				text-align:left;
			}
			
			td 
			{
				padding:5px;
				border-right: 0;
			  border: 1px solid #f0f0f0;
			}
			
			td.Passed
			{
				background-color: #a9e088;
				background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAKfSURBVDjLpZPrS1NhHMf9O3bOdmwDCWREIYKEUHsVJBI7mg3FvCxL09290jZj2EyLMnJexkgpLbPUanNOberU5taUMnHZUULMvelCtWF0sW/n7MVMEiN64AsPD8/n83uucQDi/id/DBT4Dolypw/qsz0pTMbj/WHpiDgsdSUyUmeiPt2+V7SrIM+bSss8ySGdR4abQQv6lrui6VxsRonrGCS9VEjSQ9E7CtiqdOZ4UuTqnBHO1X7YXl6Daa4yGq7vWO1D40wVDtj4kWQbn94myPGkCDPdSesczE2sCZShwl8CzcwZ6NiUs6n2nYX99T1cnKqA2EKui6+TwphA5k4yqMayopU5mANV3lNQTBdCMVUA9VQh3GuDMHiVcLCS3J4jSLhCGmKCjBEx0xlshjXYhApfMZRP5CyYD+UkG08+xt+4wLVQZA1tzxthm2tEfD3JxARH7QkbD1ZuozaggdZbxK5kAIsf5qGaKMTY2lAU/rH5HW3PLsEwUYy+YCcERmIjJpDcpzb6l7th9KtQ69fi09ePUej9l7cx2DJbD7UrG3r3afQHOyCo+V3QQzE35pvQvnAZukk5zL5qRL59jsKbPzdheXoBZc4saFhBS6AO7V4zqCpiawuptwQG+UAa7Ct3UT0hh9p9EnXT5Vh6t4C22QaUDh6HwnECOmcO7K+6kW49DKqS2DrEZCtfuI+9GrNHg4fMHVSO5kE7nAPVkAxKBxcOzsajpS4Yh4ohUPPWKTUh3PaQEptIOr6BiJjcZXCwktaAGfrRIpwblqOV3YKdhfXOIvBLeREWpnd8ynsaSJoyESFphwTtfjN6X1jRO2+FxWtCWksqBApeiFIR9K6fiTpPiigDoadqCEag5YUFKl6Yrciw0VOlhOivv/Ff8wtn0KzlebrUYwAAAABJRU5ErkJggg==);
				background-repeat: no-repeat;
		    background-position: center center;
			}
			
			td.Failed
			{
				background-color: #f7b8ad;
				font-weight:bold;
				background-repeat: no-repeat;
		    background-position: center center;
		    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAJPSURBVDjLpZPLS5RhFMYfv9QJlelTQZwRb2OKlKuINuHGLlBEBEOLxAu46oL0F0QQFdWizUCrWnjBaDHgThCMoiKkhUONTqmjmDp2GZ0UnWbmfc/ztrC+GbM2dXbv4ZzfeQ7vefKMMfifyP89IbevNNCYdkN2kawkCZKfSPZTOGTf6Y/m1uflKlC3LvsNTWArr9BT2LAf+W73dn5jHclIBFZyfYWU3or7T4K7AJmbl/yG7EtX1BQXNTVCYgtgbAEAYHlqYHlrsTEVQWr63RZFuqsfDAcdQPrGRR/JF5nKGm9xUxMyr0YBAEXXHgIANq/3ADQobD2J9fAkNiMTMSFb9z8ambMAQER3JC1XttkYGGZXoyZEGyTHRuBuPgBTUu7VSnUAgAUAWutOV2MjZGkehgYUA6O5A0AlkAyRnotiX3MLlFKduYCqAtuGXpyH0XQmOj+TIURt51OzURTYZdBKV2UBSsOIcRp/TVTT4ewK6idECAihtUKOArWcjq/B8tQ6UkUR31+OYXP4sTOdisivrkMyHodWejlXwcC38Fvs8dY5xaIId89VlJy7ACpCNCFCuOp8+BJ6A631gANQSg1mVmOxxGQYRW2nHMha4B5WA3chsv22T5/B13AIicWZmNZ6cMchTXUe81Okzz54pLi0uQWp+TmkZqMwxsBV74Or3od4OISPr0e3SHa3PX0f3HXKofNH/UIG9pZ5PeUth+CyS2EMkEqs4fPEOBJLsyske48/+xD8oxcAYPzs4QaS7RR2kbLTTOTQieczfzfTv8QPldGvTGoF6/8AAAAASUVORK5CYII=);
			}
			
			td.Inconclusive
			{
				background-color: #fff8b9;
				background-repeat: no-repeat;
		    background-position: center center;
		    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAIsSURBVDjLpVNLSJQBEP7+h6uu62vLVAJDW1KQTMrINQ1vPQzq1GOpa9EppGOHLh0kCEKL7JBEhVCHihAsESyJiE4FWShGRmauu7KYiv6Pma+DGoFrBQ7MzGFmPr5vmDFIYj1mr1WYfrHPovA9VVOqbC7e/1rS9ZlrAVDYHig5WB0oPtBI0TNrUiC5yhP9jeF4X8NPcWfopoY48XT39PjjXeF0vWkZqOjd7LJYrmGasHPCCJbHwhS9/F8M4s8baid764Xi0Ilfp5voorpJfn2wwx/r3l77TwZUvR+qajXVn8PnvocYfXYH6k2ioOaCpaIdf11ivDcayyiMVudsOYqFb60gARJYHG9DbqQFmSVNjaO3K2NpAeK90ZCqtgcrjkP9aUCXp0moetDFEeRXnYCKXhm+uTW0CkBFu4JlxzZkFlbASz4CQGQVBFeEwZm8geyiMuRVntzsL3oXV+YMkvjRsydC1U+lhwZsWXgHb+oWVAEzIwvzyVlk5igsi7DymmHlHsFQR50rjl+981Jy1Fw6Gu0ObTtnU+cgs28AKgDiy+Awpj5OACBAhZ/qh2HOo6i+NeA73jUAML4/qWux8mt6NjW1w599CS9xb0mSEqQBEDAtwqALUmBaG5FV3oYPnTHMjAwetlWksyByaukxQg2wQ9FlccaK/OXA3/uAEUDp3rNIDQ1ctSk6kHh1/jRFoaL4M4snEMeD73gQx4M4PsT1IZ5AfYH68tZY7zv/ApRMY9mnuVMvAAAAAElFTkSuQmCC);
			}
			
			td.NotImplemented
			{
				background-color: #c7e3ff;
			  background-repeat: no-repeat;
		    background-position: center center;
		    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAKcSURBVDjLpZPLa9RXHMU/d0ysZEwmMQqZiTaP0agoaKGJUiwIxU0hUjtUQaIuXHSVbRVc+R8ICj5WvrCldJquhVqalIbOohuZxjDVxDSP0RgzyST9zdzvvffrQkh8tBs9yy9fPhw45xhV5X1U8+Yhc3U0LcEdVxdOVq20OA0ooQjhpnfhzuDZTx6++m9edfDFlZGMtXKxI6HJnrZGGtauAWAhcgwVnnB/enkGo/25859l3wIcvpzP2EhuHNpWF9/dWs/UnKW4EOGDkqhbQyqxjsKzMgM/P1ymhlO5C4ezK4DeS/c7RdzQoa3x1PaWenJjJZwT9rQ1gSp/js1jYoZdyfX8M1/mp7uFaTR8mrt29FEMQILr62jQ1I5kA8OF59jIItVA78dJertTiBNs1ZKfLNG+MUHX1oaURtIHEAOw3p/Y197MWHEJEUGCxwfHj8MTZIcnsGKxzrIURYzPLnJgbxvG2hMrKdjItjbV11CYKeG8R7ygIdB3sBMFhkem0RAAQ3Fuka7UZtRHrasOqhYNilOwrkrwnhCU/ON5/q04vHV48ThxOCuoAbxnBQB+am65QnO8FqMxNCjBe14mpHhxBBGCWBLxD3iyWMaYMLUKsO7WYH6Stk1xCAGccmR/Ozs/bKJuXS39R/YgIjgROloSDA39Deit1SZWotsjD8pfp5ONqZ6uTfyWn+T7X0f59t5fqDhUA4ry0fYtjJcWeZQvTBu4/VqRuk9/l9Fy5cbnX+6Od26s58HjWWaflwkusKGxjm1bmhkvLXHvh1+WMbWncgPfZN+qcvex6xnUXkzvSiYP7EvTvH4toDxdqDD4+ygT+cKMMbH+3MCZ7H9uAaDnqytpVX8cDScJlRY0YIwpAjcNcuePgXP/P6Z30QuoP4J7WbYhuQAAAABJRU5ErkJggg==);
 
			}
			
			td.NotExecuted
			{
				background-color:#c7e3ff;
				background-repeat: no-repeat;
		    background-position: center center;
		    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAJySURBVDjLpVNLbxJRFO4P8BfwO2Dp0g27VmvSnYkbEzYmLpq6sZP66KIxQmYsUUyb1gYqCZrU2qamVJwOIKaxUKAMD4HyKBQGHAaGx1COcy4P8bHzJt/i3pzvO+c759wJAJgYx7Vl0KjQqdCrmBlAP3jT/Bk/TryiQnv/rWhwuDOM9zjGnYROhUAwLBweRbg3riQza68YMAZjfxMYkK/a2DwVOE3whbIIktwB5bJHUGu0IVesgOcoyK/sJSiMHYoMBbRIDka+S82WAnjkdhcqUgcEFfVWl7xJchsOfX7JshNFES0RQF9YNmYekuPnDSj+aEOh2kc014BcpTUS2Tvw8Hc3CmhHgwI6B3fGYNl4SmIbbjxiCQnJ+WoLphZcEMpIkCk3SUwkeQ603csgFwX0nm9RDj1jqUi6/pBV4YJIrg5ZoakKfCIInkkgNhS4qMqwuvmeQy4KzPhPQgI2q1zrEAHMiLi56IVYvgFTlCpAOWH6sZvc28olbFg3BeQSgeNAkAhg+egVydNP3CQrik7OO4mtyfl9chcbHVhdez0S0H/+GuaqUgtqskJ8EjLVJyeL8oiMCXAysWwVaIt1ZEFndcaZdK4MvR5AutQk5SI5UZAJJh/sk6lgYzvdHhx8CQNl/jBqouaerWRwsj5eEJujSSARx4mekYwNxQRxNbvpxTp/2xzrj3G4SPS7ALX1kZUKlX5gta6QalIXMlkmzBzLVsBosUlz9M6vRRpf5SWrj1q3b/FefxzSBZH0BD2HUwLssgFYolf4WdP236s8/pnuvEoZFl7uMk+X1zj6uVl4ZmKERaOFmzM6mFtM5N+f6X++80/jPghfk2d02wAAAABJRU5ErkJggg==);
 
			}
			
			tr.scenario
			{
				cursor:pointer;
			}
			
			td.scenarioText
			{
				color: #000;
			}
			
			td.namespaceResultSummary
			{
			  width:20%;
			}
			
			tr.namespaceResultSummary
			{
			    height:17px;
			}
			
			tr.hasException
			{
				cursor:pointer;
				font-weight: bold;
				color: Maroon;
			}
			
			th.scenarioHeader
			{
				width:250px    
			}
 
			th.resultHeader
			{
				width:100px;
			}
			
			th.summaryHeader
			{
				width:100px;    
			}
			
			th.summaryCount
			{
				width:100px;    
			}
 
			td.duration
			{
				width:100px;
			}
			
			td.indentation
			{
				width: 0px;
				display: none;
			}
			
			td.result
			{
				width:150px;
			}
			
			table.summaryTable
			{
				width:200px;
				border-collapse:collapse;
			}
			
			table.summaryTable td
			{
				text-align:left;
			}
			
			.summaryLable
			{
			  width:120px;
			}
			
			tr.assembly
			{
				background-color:#101010;
				color:White;
				height:40px;
			}
			
			tr.namespace
			{
			    background: #f0f0f0;
			}
			
			table.namespace
			{
			    font-weight: bold;
			}
			
			tr.step
			{
			  background-color:#fafafa;
			}
 
      tr.step td
      {
      }
		
		  td.result
		  {
		    width:10px;
		  }
			
			.spacer td
			{ 
				padding:0px;
				display: none;    /* Why do you need this cell at all? seems like a waste of space and it messes with borders */
			}
		
			#summaryDiv h4 
			{
			  font-size: 14pt;
			  color: #2B547D;
			}		
			
		</style>

		<script type="text/javascript">
		    function toggle(id) {
		      var e = document.getElementById(id);
		      if (e.style.display == 'none') {
		        e.style.display = '';
		      }
		      else {
		        e.style.display = 'none';
		      }
		    }
		</script>
	</head>

	<body>
		<div id="main">
			<div id="header">
				<span id="bddifyTitle">Bddify</span>
                <br />
				<span id="bddifyDescription">An awesome BDD framework for .Net developers</span>
			</div>

			<div id="summaryDiv">
        <h4>Summary</h4>

        <div id="innderSummaryDiv">
            <div id="resultSummary">
				      <table class="summaryTable">
					      <tbody>
						      <tr class="namespace">
                    <td />
							      <td class="summaryLable">Namespaces</td>
							      <td>@Model.GroupBy(b => b.Object.GetType().Namespace).Count()</td>
						      </tr>
						      <tr>
                    <td class="result Passed"></td>
                    <td class="summaryLable">Passed</td>
							      <td>@Model.Count(b => b.Result == Bddify.Core.StepExecutionResult.Passed)</td>
						      </tr>
						      <tr>
				            <td class="result Failed"></td>
							      <td class="summaryLable">Failed</td>
							      <td>@Model.Count(b => b.Result == Bddify.Core.StepExecutionResult.Failed)</td>
						      </tr>
						      <tr>
				            <td class="result Inconclusive"></td>
							      <td class="summaryLable">Inconclusive</td>
							      <td>@Model.Count(b => b.Result == Bddify.Core.StepExecutionResult.Inconclusive)</td>
						      </tr>
						      <tr>
				            <td class="result NotImplemented"></td>
							      <td class="summaryLable">Not Implemented</td>
							      <td>@Model.Count(b => b.Result == Bddify.Core.StepExecutionResult.NotImplemented)</td>
  					      </tr>
						      <tr>
				            <td class="result NotExecuted"></td>
							      <td colspan="2" class="summaryLable">Not Executed</td>
						      </tr>
					      </tbody>
				      </table>
            </div>
        </div>
		  </div>

			<div id="testResult">
        @{
            string assemblyName = string.Empty;
            if (Model.Count > 0) { 
                string assembly = Model[0].Object.GetType().Assembly.CodeBase;
                assemblyName = assembly; // "..." + assembly.Substring(assembly.Length - 60);
            }
        }

        <p>Assembly: '@assemblyName'</p>

				<table>
					<tbody>
						@foreach (var group in Model.GroupBy(b => b.Object.GetType().Namespace))
      {
							<tr class="namespace">
								<td colspan="4">
                  <table class="namespace">
                    <tr>
                      <td>@group.Key</td>
                      <td class="namespaceResultSummary">
                      @{
                        var fullWidth = 400;
                        var all = group.Count();
                        var failed = group.Count(r => r.Result == Bddify.Core.StepExecutionResult.Failed);
                        var failedRatio = (double)failed / all * 100;
                        var failedVisible = (failedRatio == 0 ? "none" : "");
                        var passed = group.Count(r => r.Result == Bddify.Core.StepExecutionResult.Passed);
                        var passedRatio = (double)passed / all * 100;
                        var passedVisible = (passedRatio == 0 ? "none" : "");
                        var notImplemented = group.Count(r => r.Result == Bddify.Core.StepExecutionResult.NotImplemented);
                        var notImplementedRatio = (double)notImplemented / all * 100;
                        var notImplementedVisible = (notImplementedRatio == 0 ? "none" : "");
                        var inconclusive = group.Count(r => r.Result == Bddify.Core.StepExecutionResult.Inconclusive);
                        var inconclusiveRatio = (double)inconclusive / all * 100;
                        var inconclusiveVisible = (inconclusiveRatio == 0 ? "none" : "");
                        var notExecuted = group.Count(r => r.Result == Bddify.Core.StepExecutionResult.NotExecuted);
                        var notExecutedRatio = (double)notExecuted / all * 100;
                        var notExecutedVisible = (notExecutedRatio == 0 ? "none" : "");

                                                }
                        <table>
                          <tr class="namespaceResultSummary">
                            <td class="Failed" style="width:@failedRatio%;display:@failedVisible"></td>
                            <td class="Passed" style="width:@passedRatio%;display:@passedVisible"></td>
                            <td class="NotImplemented" style="width:@notImplementedRatio%;display:@notImplementedVisible"></td>
                            <td class="Inconclusive" style="width:@inconclusiveRatio%;display:@inconclusiveVisible"></td>
                            <td class="NotExecuted" style="width:@notExecutedRatio%;display:@notExecutedVisible"></td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>
                </td>
							</tr>

							foreach (var scenario in group) {
              <tr class="scenario" onclick="toggle('@scenario.Id');">
								<td class="result @scenario.Result"></td>
								<td class="scenarioText" colspan="3">@scenario.ScenarioText</td>
							</tr>
							<tr class="step" id="@scenario.Id" style="display:none">
                <td class="result @scenario.Result" />
                <td colspan="3" style="padding:0px">
                  <table>
                  @foreach (var step in scenario.Steps) {
                    string stepClass = string.Empty;
                    string result = step.ReadableMethodName;
                    if(step.Exception != null){
                      stepClass = "hasException";
                                            
                      if(!string.IsNullOrEmpty(step.Exception.Message)){
                          result += " [Exception Message: '" + step.Exception.Message + "']";
                      }
                    }
                    <tr class="@stepClass step" onclick="toggle('@step.Id');">
    									<td class="result @step.Result"></td>
										  <td class="indentation"></td>
										  <td colspan="2">@result</td>
                    </tr>

                    if (step.Exception != null) {
									  <tr class="exceptionDetails step" id="@step.Id" style="display:none">
        							<td class="result @step.Result"></td>
    									<td class="indentation"></td>
										  <td class="indentation"></td>
										  <td>@step.Exception.StackTrace</td>
									  </tr>
                    }
                  }
                  </table>                                    
                </td>
		  				</tr>
								    <!-- empty row to separate scenarios -->
								    <tr class="spacer step">
									    <td colspan="4"></td>
								    </tr>
                            }
              }
					</tbody>
				</table>
			</div>
		</div>
	</body>

</html>